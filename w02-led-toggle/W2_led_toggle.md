============================================================
W2 LED Toggle 總綱（技能日）
============================================================

1) 任務定位
------------------------------------------------------------
W1 → 理解 sysfs  
W2 → 用 open/write/read 完成最小 LED toggle 程式  

目標：
  - 學會 open / write / read
  - 學會錯誤回報（errno）
  - 學會小型 CLI 程式（argc/argv）
  - 學會流程圖思維
  - 學會用 strace debug

------------------------------------------------------------

2) LED Toggle 最小流程
------------------------------------------------------------
  export GPIO
    ↓
  direction = out
    ↓
  value = 1
    ↓
  delay
    ↓
  value = 0
    ↓
  unexport

------------------------------------------------------------

3) BMC Daemon 的應用
------------------------------------------------------------
LED daemon：
  - 解析 config（GPIO 與 active_level）
  - 使用 struct table 管理多顆 LED
  - 用 open/write 控制亮滅
  - 用 timer thread 實現 blink

------------------------------------------------------------

4) 心法（參同契 × 孫子兵法）
------------------------------------------------------------
參同契：
  「一動一靜，陰陽互用」
  → LED toggle = on/off 交替，程序必須節律一致

兵法：
  「兵貴神速」
  → 寫程式時先跑通最小版本，不思考完美

------------------------------------------------------------

5) Debug Path
------------------------------------------------------------
若失敗：
  - 用 strace 看 open 是否成功
  - 用 ls 確認 sysfs 是否存在
  - 用 dmesg 看 kernel 錯誤
  - 檢查是否為 SIO 硬體（無 sysfs）

============================================================
============================================================
W2 LED Toggle 重點摘要
============================================================
- static const ssize_t → 用於固定、不變的數值（buffer、toggle 次數）
- fprintf/printf/perror → stdout/錯誤/errno 訊息
- argc/argv → CLI 工具的參數解析核心
- return WriteOnce(...) → 傳遞函式回傳值簡潔寫法
- enum / typedef → 整數常數組與型別命名
- strerror(errno) → 系統錯誤描述
- 三元運算子 → 簡潔轉換 "1"/"0"
- EXIT_SUCCESS / EXIT_FAILURE → 統一回傳碼
- sysfs header 不用背，用久自然熟
- pointer × 6 能力 + strace = BMC 工程師基本功

最重要：
  NCT6126D 是 SuperIO，不是 BMC GPIO，
  無法使用 /sys/class/gpio。
  W2 練習請使用 /tmp/gpio fake sysfs。

============================================================
============================================================
C 語法 / I/O 小抄（W2 版）
============================================================
- static function:
  只給本 .c 檔用的函式 → static
  避免撞名、隱藏實作、方便最佳化。

- const parameter:
  傳值 (int) → 加不加 const 功能一樣
  指標 (char *) → 用 const 保證不改字串內容

- printf / fprintf / perror:
  printf           → stdout（行緩衝、可被重導）
  fprintf(stderr)  → stderr（幾乎不緩衝、不易被重導）
  perror("msg")    → 在 stderr 印 "msg: 錯誤說明"

- argv:
  argv[0] = 程式名
  argv[1] = 第 1 個參數
  -> 陣列仍從 0 開始，只是 0 留給程式名。

- 沒 LED 怎麼驗證:
  1) 用 /tmp/gpio 假 sysfs，watch value 檔案內容
  2) 在迴圈加 printf debug
  3) 用 strace 檢查 open/write 是否成功
  4) 之後搬到真 BMC 板實測 LED
============================================================
============================================================
時間單位與 usleep / delay 心智圖
============================================================

1) 基本換算
------------------------------------------------------------
1 秒 (1 s)      = 1000 毫秒 (1000 ms)
1 毫秒 (1 ms)   = 1000 微秒 (1000 µs)
1 微秒 (1 µs)   = 1000 奈秒 (1000 ns)

常見數字感：
  - 1 s   = 一秒
  - 100 ms = 0.1 s（人眼明顯看到閃爍）
  - 10 ms  = 0.01 s（接近連續亮，較難分辨）
  - 1 ms   = 0.001 s（多用在通訊/精密時間）

------------------------------------------------------------
2) usleep()
------------------------------------------------------------
原型：
  int usleep(useconds_t usec);

參數單位：
  - 以「微秒 µs」為單位
  - 1 ms = 1000 µs → usleep(1 * 1000)

實務對照：
  - 想 delay 50 ms  → usleep(50 * 1000);
  - 想 delay 200 ms → usleep(200 * 1000);
  - 想 delay 100 ms → usleep(100 * 1000);

============================================================
3) 在這支 LED toggle 程式裡的應用
------------------------------------------------------------
目前你的程式：
  usleep(50);        → 大約 0.000050 秒 (50 µs)
  usleep(deley_ms);  → 直接用 argv[3] 當 µs

若你希望「參數代表 ms」：
  - 改名：int delay_ms;
  - 呼叫時：usleep(delay_ms * 1000);

例：
  ./gpio_led_toggle_mark 37 3 100   → 100 ms
  → 程式裡 usleep(delay_ms * 1000) = usleep(100000);

============================================================
4) 心法
------------------------------------------------------------
- 人眼可見的閃爍 → 範圍在 50 ms ~ 500 ms 之間。
- 小於 10 ms → 看起來幾乎長亮。
- 用 usleep 時，腦中先想「我要幾 ms」，再乘 1000 變成 µs。
============================================================

